---
title: "p8105_hw2_mra2209"
author: "Maya Arnott"
---

author: **Maya Arnott**   
date: **2025-09-19**

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(tibble)
library(readxl)
```

# Problem 1 
### Importing pols-month data set:
```{r}
pols_df = (
  read_csv("datasets/pols-month.csv") |> 
    janitor::clean_names()
)

```

### Importing unemployment.csv data set:
```{r}
unemployment_df = (
  read_csv("datasets/unemployment.csv") |> 
    janitor::clean_names()
)
```

### Importing snp.csv data set:
```{r}
snp_df = (
  read_csv("datasets/snp.csv") |> 
    janitor::clean_names()
)
```

### Cleaning the data in pols_df:
```{r}
pols_df <- pols_df |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    year = as.integer(year),
    month = month.name[as.integer(month)],
    day = as.integer(day),
    president = case_when(
      prez_dem == 1 ~ "dem",
      prez_gop == 1 ~ "gop",
      TRUE ~ NA_character_  # to get rid of any missing values
    )
  ) |> 
  select(-prez_dem, -prez_gop, -day) #drops old columns
```

### Cleaning the data in snp_df:
```{r}
snp_df <- snp_df |> 
  separate(date, into = c("month", "day", "year"), sep = "/") |> 
  mutate(
    year = as.integer(year),
    month = month.name[as.integer(month)],
    day = as.integer(day),
    year = ifelse(year < 50, year + 2000, year + 1900),
  ) |> 
  select(-day) |>  # drops old column
  select(year, month, close)
```

### Cleaning the data in unemployment_df:
```{r}
unemployment_df <- unemployment_df |> 
  pivot_longer(
    cols = jan:dec,      # pivot these columns
    names_to = "month",  # new name is "month"
    values_to = "unemployment (%)"  # new column is for the values
  )
```

### Joining the data sets:
```{r}
merged_df <- left_join(pols_df, snp_df, by = c("year", "month")) |>
  left_join(unemployment_df, by = c("year", "month"))
  
```
### Description of data sets:  
The pols-month.csv data set contained 822 observations of 9 variables related to the number of national politicians who are democratic or republican at any given time. I cleaned this data set so that the "mon" column was split into "year", "month", and "day," and replaced the month number with the actual name of the month. The key variables were prez_gop, an indicator of whether the president was republican on the associated date, and prez_dem, an indicator of whether the president was democratic on the associated date. Both columns were binary and had an output of 1 (yes) or 0 (no). I combined these columns into a "president" column, indicating whether the president was democratic or republican for any given date. The years ranged from 1947 to 2015.

The snp.csv data set contained 787 observations of 2 variables related to the S&P, which is often used as a representative measure of the stock market performance as whole. The key variables were "date," which was again split into three columns, and "close," indicating the closing values of the S&P stock index on the given date. The years ranged from 1950 to 2015.

The unemployment.csv data set contained 68 observations of 13 variables. The first column was "year" and every other column was a month out of the year, representing the percentage of unemployment in that particular month in the associated year. I made the data set "longer" so that it can be merged with the other data sets. The years ranged from 1948 to 2015.

The resulting merged data set contains "year" and "month" as the first two columns, since I removed the "day" column from each data set and joined the data sets with these columns as keys. Now we can see whether the president was democratic or republican, the closing values of the S&P, and the unemployment % of each given year/month (if there is data for that year/month). The years ranged from 1947 to 2015. 

# Problem 2

### Importing & cleaning mr. trash wheel data set:
```{r}
mr_trash_wheels_df = (
  read_excel("datasets/trash_wheel_collection.xlsx", sheet = "Mr. Trash Wheel", skip = 1) |>  
    # skips first row with figure/drawing
    janitor::clean_names() |> 
    select(-x15, -x16, -homes_powered) |>  
    # removes empty columns and columns not containing trash wheels 
    # specific data
    mutate(
      sports_balls = as.integer(round(sports_balls)), 
      wheel = "Mr. Trash Wheel",
      year = as.integer(year)
      # converts to an int type & rounds to nearest int
    )
)
```

### Importing and cleaning prof trash wheel data set:

```{r}
prof_trash_wheels_df = (
  read_excel("datasets/trash_wheel_collection.xlsx", sheet = "Professor Trash Wheel", skip = 1) |>  
  janitor::clean_names() |> 
    select(-homes_powered) |> 
    mutate( 
      wheel = "Professor Trash Wheel",
      year = as.integer(year)
      )
)
  
```

### Importing and cleaning Gwyns trash wheel data set:

```{r}
gwyn_trash_wheel_df = (
  read_excel("datasets/trash_wheel_collection.xlsx", sheet = "Gwynns Falls Trash Wheel", skip = 1) |> 
    janitor::clean_names() |> 
    select(-homes_powered) |> 
    mutate(
      wheel = "Gwynns Trash Wheel",
      year = as.integer(year)
      )
)
```

### Combining all data sets:
```{r}
merged_trash_wheels_df = (
  bind_rows(mr_trash_wheels_df, prof_trash_wheels_df, gwyn_trash_wheel_df)
)
```

# Problem 3
